{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//Логіка сторінки Home\nimport {\n  getAllCategory,\n  getAllProducts,\n  getProductsByCategory,\n  getProductByName,\n} from './js/products-api.js';\n\nimport { getFromLocalStorage } from './js/storage.js';\nimport {\n  createMarkupProduct,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showLoader,\n  hideLoader,\n} from './js/helpers.js';\nimport { clickCardFoo } from './js/modal.js';\n\nimport { ThemeChange, setThemeFromLocalStorage } from './js/theme-switcher.js';\nsetThemeFromLocalStorage();\ncategoryRender();\n\nlet categoryName = '';\nlet currentPage = 0;\nlet currentMode = 'All';\n\nconst productList = document.querySelector('ul.products');\nconst CategorieList = document.querySelector('ul.categories');\nconst divNotFound = document.querySelector('div.not-found');\n\n// categoryRender\nfunction categoryRender() {\n  getAllCategory()\n    .then(res => {\n      res.unshift('All');\n      const categoriesItem = res\n        .map(\n          category => `\n    <li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>\n    `\n        )\n        .join('');\n      CategorieList.insertAdjacentHTML('beforeend', categoriesItem);\n      CategorieList.addEventListener('click', renderProduct);\n    })\n    .catch(rej => console.log(rej));\n}\n\n// renderProduct\nasync function renderProduct(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  showLoader();\n  productHaveCheckNoneActive();\n  categoryName = event.target.textContent;\n\n  if (categoryName === 'All') {\n    currentMode = 'All';\n  } else {\n    currentMode = 'category';\n  }\n\n  const allBtn = CategorieList.querySelectorAll('button');\n  allBtn.forEach(btn => btn.classList.remove('categories__btn--active'));\n\n  const clickButton = event.target.closest('button');\n  clickButton.classList.add('categories__btn--active');\n\n  currentPage = 1;\n  try {\n    if (categoryName === 'All') {\n      const allProducts = await getAllProducts(currentPage);\n      productList.innerHTML = createMarkupProduct(allProducts.products);\n      if (allProducts.products.length >= 12) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n      }\n      return;\n    }\n\n    const res = await getProductsByCategory(categoryName, currentPage);\n\n    if (res.products.length >= 12) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n\n    productList.innerHTML = createMarkupProduct(res.products);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\n// modal\nproductList.addEventListener('click', clickCardFoo);\n\n// add-and-Remove-To-Cart\nconst navCountCart = document.querySelector('[data-cart-count]');\nlet cartCounter = 0;\n// savedCartCounter\nconst savedCartCounter = getFromLocalStorage('cartCounter');\nif (savedCartCounter) {\n  cartCounter = savedCartCounter;\n  navCountCart.textContent = cartCounter;\n}\n\n// add-and-Remove-To-wishlist\nconst navCountWishlist = document.querySelector('[data-wishlist-count]');\nlet wishlistCounter = 0;\n// savedWishlistCounter\nconst savedWishlistCounter = getFromLocalStorage('wishlistCounter');\nif (savedWishlistCounter) {\n  wishlistCounter = savedWishlistCounter;\n  navCountWishlist.textContent = wishlistCounter;\n}\n\n// form\nconst form = document.querySelector('.search-form');\nconst inputSearch = form.querySelector('.search-form__input');\nlet inpValue = '';\nform.addEventListener('submit', searchFormFoo);\n\nasync function searchFormFoo(event) {\n  event.preventDefault();\n  currentPage = 1;\n  currentMode = 'search';\n  showLoader();\n  productHaveCheckNoneActive();\n\n  try {\n    inpValue = inputSearch.value.trim();\n    if (inpValue === '') {\n      return;\n    }\n    const getProducts = await getProductByName(inpValue, currentPage);\n\n    if (getProducts.products.length >= 12) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n    if (getProducts.products.length === 0) {\n      productList.innerHTML = '';\n      divNotFound.classList.add('not-found--visible');\n    }\n    productList.innerHTML = createMarkupProduct(getProducts.products);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n// btn-clear\nconst clearBtn = document.querySelector('.search-form__btn-clear');\nclearBtn.addEventListener('click', clearBtnFoo);\n\nasync function clearBtnFoo() {\n  inputSearch.value = '';\n  currentMode = 'All';\n  showLoader();\n  productHaveCheckNoneActive();\n\n  const allProducts = await getAllProducts(currentPage);\n  productList.innerHTML = createMarkupProduct(allProducts.products);\n  if (allProducts.products.length >= 12) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n  hideLoader();\n  return;\n}\n\n// LoadMoreBtn\nconst LoadMoreBtn = document.querySelector('.load-more-btn');\nLoadMoreBtn.addEventListener('click', loadMoreFoo);\n\nasync function loadMoreFoo() {\n  currentPage += 1;\n  try {\n    showLoader();\n    if (currentMode === 'All') {\n      const { products } = await getAllProducts(currentPage);\n\n      productHaveCheckActive(products);\n\n      productList.insertAdjacentHTML(\n        'beforeend',\n        createMarkupProduct(products)\n      );\n    } else if (currentMode === 'category') {\n      const { products } = await getProductsByCategory(\n        categoryName,\n        currentPage\n      );\n      productHaveCheckActive(products);\n      productList.insertAdjacentHTML(\n        'beforeend',\n        createMarkupProduct(products)\n      );\n    } else if (currentMode === 'search') {\n      const { products } = await getProductByName(inpValue, currentPage);\n      productHaveCheckActive(products);\n      productList.insertAdjacentHTML(\n        'beforeend',\n        createMarkupProduct(products)\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n// products.length === 0\nfunction productHaveCheckActive(products) {\n  if (products.length === 0) {\n    divNotFound.classList.add('not-found--visible');\n    hideLoadMoreButton();\n  }\n}\n\nfunction productHaveCheckNoneActive() {\n  if (divNotFound.classList.contains('not-found--visible'))\n    divNotFound.classList.remove('not-found--visible');\n}\n\n// theme\nconst themeBtn = document.querySelector('.theme-btn');\nthemeBtn.addEventListener('click', ThemeChange);\n"],"names":["setThemeFromLocalStorage","categoryRender","categoryName","currentPage","currentMode","productList","CategorieList","divNotFound","getAllCategory","res","categoriesItem","category","renderProduct","rej","event","showLoader","productHaveCheckNoneActive","btn","allProducts","getAllProducts","createMarkupProduct","showLoadMoreButton","hideLoadMoreButton","getProductsByCategory","error","hideLoader","clickCardFoo","navCountCart","cartCounter","savedCartCounter","getFromLocalStorage","navCountWishlist","wishlistCounter","savedWishlistCounter","form","inputSearch","inpValue","searchFormFoo","getProducts","getProductByName","clearBtn","clearBtnFoo","LoadMoreBtn","loadMoreFoo","products","productHaveCheckActive","themeBtn","ThemeChange"],"mappings":"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"}