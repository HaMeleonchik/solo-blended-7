import{a as m,i as E}from"./vendor-CBLHhzjb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();function d(e,t){const r=JSON.stringify(t);try{localStorage.setItem(e,r)}catch(s){console.error(s)}}function a(e){try{const t=localStorage.getItem(e);return t===null?void 0:JSON.parse(t)}catch(t){console.error(t)}}const f="https://dummyjson.com";async function S(e){try{return(await m.get(`${f}/products/${e}`)).data}catch(t){console.log(t)}}async function H(e,t=1){try{return(await m.get(`${f}/products/search?q=${e}&limit=12&skip=${(t-1)*12}`)).data}catch(r){console.log(r)}}async function j(){try{return(await m.get(`${f}/products/category-list`)).data}catch(e){console.log(e)}}async function J(e,t=1){try{return(await m.get(`${f}/products/category/${e}?limit=12&skip=${(t-1)*12}`)).data}catch(r){console.log(r)}}async function U(e){try{return(await m.get(`${f}/products?limit=12&skip=${(e-1)*12}`)).data}catch(t){console.log(t)}}function b(e){return e.map(({id:t,title:r,category:s,images:o,description:c,brand:n,price:i})=>`
  <li class="products__item" data-id="${t}">
    <img class="products__image" src="${o[0]}" alt="${c}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${n}</span></p>
    <p class="products__category">Category: ${s}</p>
    <p class="products__price">Price: $${i}</p>
 </li>
  `).join("")}function O({returnPolicy:e,title:t,category:r,images:s,description:o,shippingInformation:c,price:n}){return`
<img class="modal-product__img" src="${s[0]}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${r}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping:${c}</p>
        <p class="modal-product__return-policy">Return Policy:${e}</p>
        <p class="modal-product__price">Price:${n}$</p>
      </div>

  `}const $=document.querySelector(".load-more-btn");function K(){$&&($.style.display="block")}function G(){$&&($.style.display="none")}q();const v=document.querySelector(".products-cart");v&&v.addEventListener("click",B);async function q(){try{const e=document.querySelector(".products-cart");if(!e)return;const t=a("Cards");if(!t||t.lenght===0)return;const r=t.map(p=>S(p)),s=await Promise.all(r),o=document.querySelector("[data-cart-count]"),c=document.querySelector("[data-wishlist-count]"),n=a("cartCounter"),i=a("wishlistCounter"),u=document.querySelectorAll(".cart-summary__value");n&&(o.textContent=n,u.length>0&&(u[0].textContent=n)),i&&(c.textContent=i);const M=s.map(p=>p.price).reduce((p,F)=>p+F,0),R=Math.round(M*100)/100;u.length>1&&(u[1].textContent=`$${R}`),e.innerHTML=b(s)}catch(e){console.log(e)}}const h=document.querySelector(".cart-summary__btn");h&&!h.dataset.listenerAdded&&(h.addEventListener("click",N),h.dataset.listenerAdded="true");function N(){E.show({backgroundColor:"green",message:"Successful buy product",messageColor:"white",position:"topRight",close:!1,iconUrl:"icon/success.svg"})}let l=0;const k=document.querySelector(".modal-product"),_=k.closest(".modal"),D=_.querySelector(".modal__close-btn");async function B(e){const t=e.target.closest(".products__item");if(t){l=t.dataset.id;try{const r=await S(l);k.innerHTML=O(r),_.classList.add("modal--is-open");const s=_.querySelector(".modal-product__btn--cart");(a("Cards")||[]).find(g=>g===l)?s.textContent="Remove from Cart":s.textContent="Add to cart";const n=document.querySelector(".modal-product__btn--wishlist");(a("Wishlist")||[]).find(g=>g===l)?n.textContent="Remove from Wishlist":n.textContent="Add to Wishlist",s.addEventListener("click",I),n.addEventListener("click",T),D.addEventListener("click",()=>{_.classList.remove("modal--is-open")})}catch(r){console.log(r)}}}const L=document.querySelector("[data-cart-count]"),P=document.querySelector("[data-wishlist-count]");let C=0,y=0;function I(e){if(e.target.textContent==="Remove from Cart"){const s=(a("Cards")||[]).filter(o=>o!==l);d("Cards",s),C=L.textContent=s.length,d("cartCounter",C),e.target.textContent="Add to cart",w();return}e.target.textContent="Remove from Cart";const t=a("Cards")||[];t.push(l),d("Cards",t),C=L.textContent=[...t].length,d("cartCounter",C),w()}function w(){document.body.dataset.page==="cart"&&q()}function T(e){if(e.target.textContent==="Remove from Wishlist"){const s=(a("Wishlist")||[]).filter(o=>o!==l);d("Wishlist",s),y=P.textContent=s.length,d("wishlistCounter",y),e.target.textContent="Add to Wishlist",x();return}e.target.textContent="Remove from Wishlist";const t=a("Wishlist")||[];t.push(l),d("Wishlist",t),y=P.textContent=[...t].length,d("wishlistCounter",y),x()}function x(){document.body.dataset.page==="wishlist"&&A()}const W=document.querySelector(".products-wishlist");W&&W.addEventListener("click",B);A();async function A(){try{const e=document.querySelector(".products-wishlist");if(!e)return;const t=a("Wishlist");if(!t||t.lenght===0)return;const r=t.map(u=>S(u)),s=await Promise.all(r),o=document.querySelector("[data-cart-count]"),c=document.querySelector("[data-wishlist-count]"),n=a("cartCounter"),i=a("wishlistCounter");n&&(o.textContent=n),i&&(c.textContent=i),e.innerHTML=b(s)}catch(e){console.log(e)}}export{U as a,J as b,b as c,B as d,a as e,H as f,j as g,G as h,K as s};
//# sourceMappingURL=wishlist-B62r9ZVE.js.map
